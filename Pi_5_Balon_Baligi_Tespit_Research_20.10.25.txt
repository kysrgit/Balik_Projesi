Gömülü Sistemlerde Gerçek Zamanlı Sualtı Balık Tespiti: Raspberry Pi 5 Üzerinde Optimize Edilmiş Derin Öğrenme Modellerinin Dağıtımı için Teknik Bir Yol Haritası
Yönetici Özeti
Bu rapor, 16GB RAM'e sahip bir Raspberry Pi 5 ve Kamera Modülü 3 kullanarak su altında genel balık ve özelde istilacı balon balığı (Lagocephalus sceleratus) tespiti yapacak bir yazılım geliştirme projesi için kapsamlı bir akademik temel ve teknik yol haritası sunmaktadır. Sualtı bilgisayarlı görü sistemlerinin karşılaştığı temel zorluklar, modern nesne tespit algoritmalarının mimari ve performans analizleri, veri stratejileri ve gömülü sistemler için optimizasyon teknikleri bütüncül bir yaklaşımla ele alınmıştır.
Analizin merkezinde, sualtı görüntülerinin kalitesini düşüren fiziksel etkenler ve bu bozulmaları gidermeye yönelik ön işleme teknikleri yer almaktadır. Işık zayıflaması ve saçılımının neden olduğu renk sapmaları ve düşük kontrast gibi sorunlar, derin öğrenme modellerinin performansını doğrudan etkilemektedir.1 Bu bağlamda, Kontrast Sınırlı Adaptif Histogram Eşitleme (CLAHE) gibi hesaplama açısından verimli yöntemlerin, daha karmaşık ancak işlem gücü gerektiren fizik tabanlı (örneğin, Sea-Thru) veya Üretken Çekişmeli Ağlar (GAN) tabanlı çözümlere kıyasla, Raspberry Pi 5 gibi kaynak kısıtlı bir platformda gerçek zamanlı performans için daha uygun olduğu sonucuna varılmıştır.
Nesne tespit algoritmaları üzerine yapılan karşılaştırmalı analiz, tek aşamalı (YOLO, SSD) ve iki aşamalı (Faster R-CNN) dedektörler arasındaki temel değiş tokuşları ortaya koymaktadır. Faster R-CNN yüksek doğruluk sunarken, işlem maliyeti nedeniyle gerçek zamanlı gömülü uygulamalar için elverişsizdir.3 SSD-MobileNet en yüksek hızı sunsa da doğruluktan ödün vermektedir.3 YOLO ailesinin, özellikle YOLOv8 gibi modern versiyonlarının, hız ve doğruluk arasında en iyi dengeyi sağladığı ve bu proje için en uygun mimari olduğu tespit edilmiştir.5
Veri stratejisi, projenin başarısı için kritik bir unsur olarak belirlenmiştir. Mevcut halka açık sualtı veri setlerinin (örneğin, Fish4Knowledge, Brackish) yetersizliği ve alan kayması (domain shift) riski nedeniyle, projenin hedeflediği Akdeniz ortamına ve Lagocephalus sceleratus türüne özgü, özel bir veri seti oluşturulması zorunludur.6 Bu süreç, COCO gibi büyük ölçekli bir veri setinde önceden eğitilmiş bir modelin, özel olarak toplanan ve etiketlenen verilerle ince ayarlanmasını içeren bir transfer öğrenme yaklaşımını gerektirmektedir.
Son olarak, Raspberry Pi 5 platformu için dağıtım ve optimizasyon stratejileri incelenmiştir. 16GB RAM'in, doğrudan işlem hızını artırmaktan ziyade, daha büyük modellerin çalıştırılmasına, karmaşık işlem hatlarının yönetilmesine ve sistem esnekliğinin artırılmasına olanak tanıyan stratejik bir avantaj olduğu vurgulanmıştır. Modelin 8-bit tam sayıya (INT8) nicemlenmesi ve çıkarım için yüksek performanslı ONNX Runtime çatısının kullanılması, CPU üzerinde mümkün olan en yüksek kare/saniye (FPS) değerine ulaşmak için elzem adımlar olarak belirlenmiştir.
Bu analizler ışığında, proje için önerilen son teknoloji yığını şu şekildedir: INT8 formatında nicemlenmiş YOLOv8s modeli, transfer öğrenme tabanlı bir eğitim stratejisi, ön işleme adımı olarak CLAHE ve dağıtım için ONNX Runtime çatısı. Bu yol haritası, projenin hem yüksek doğruluklu hem de gerçek zamanlı tespit hedeflerine ulaşması için sağlam ve kanıta dayalı bir temel sunmaktadır.
Bölüm 1: Akuatik Alan: Sualtı Görüntü Bozulmalarının Karakterizasyonu ve Azaltılması
Herhangi bir nesne tespit algoritmasının başarısı, temel olarak girdi verisinin kalitesine bağlıdır. Sualtı ortamı, görüntü kalitesini önemli ölçüde düşüren benzersiz optik zorluklar sunar. Bir algoritmanın bir balığı "görebilmesi" için öncelikle suyun bozucu etkilerinin anlaşılması ve mümkün olduğunca telafi edilmesi gerekir. Bu bölüm, sualtı görüntü bozulmalarının ardındaki fiziği, bu sorunları gidermek için kullanılan ön işleme tekniklerini ve bu tekniklerin nesne tespiti performansı üzerindeki etkilerini derinlemesine incelemektedir.
1.1. Sualtı Işığının Fiziği ve Görüntüleme Sensörleri Üzerindeki Etkisi
Sualtı görüntülerinin karakteristik bozulmuş görünümü, ışığın su içinde yayılırken maruz kaldığı iki temel fiziksel süreçten kaynaklanır: zayıflama (attenuation) ve saçılma (scattering).1 Bu süreçleri anlamak, etkili düzeltme stratejileri geliştirmenin temelini oluşturur.
Işık Zayıflaması, ışık enerjisinin su molekülleri ve içindeki çözünmüş maddeler tarafından emilmesi (absorption) ve sudaki asılı parçacıklar tarafından yönünün değiştirilmesi (scattering) olaylarının birleşimidir. Emilim süreci dalga boyuna oldukça bağımlıdır. Kırmızı ışık gibi daha uzun dalga boyları, su tarafından çok hızlı bir şekilde emilirken, mavi ve yeşil gibi daha kısa dalga boyları daha derinlere nüfuz edebilir. Bu seçici emilim, sualtı görüntülerinin neden ezici bir çoğunlukla mavi-yeşil bir renk dökümüne (color cast) sahip olduğunu açıklar.1 Saçılma ise, sudaki plankton, tortu ve diğer asılı parçacıkların ışığı rastgele yönlere saptırmasıyla meydana gelir. Bu durum, sahneden gelen doğrudan sinyali zayıflatır ve bir "sis" veya "pus" (haze) etkisi yaratarak görüntü kontrastını ciddi şekilde düşürür.1
Bu etkiler statik değildir; suyun derinliği, bulanıklığı (turbidity), alg içeriği ve ortam ışığı gibi çevresel değişkenlere bağlı olarak büyük ölçüde farklılık gösterir.1 Bu değişkenlik, her koşulda geçerli tek bir evrensel çözüm geliştirmeyi zorlaştıran temel bir meydan okumadır.
Bu fiziksel bozulmaların Evrişimli Sinir Ağları (CNN) üzerindeki etkisi kritiktir. CNN tabanlı nesne tespit modelleri, nesneleri tanımak için tutarlı doku, renk ve kenar özelliklerine güvenir. Sualtı görüntülerindeki renk sapması, düşük kontrast ve bulanıklık, modelin eğitim verileri ile gerçek dünya verileri arasında önemli bir alan kaymasına (domain shift) neden olur. Bu durum, modelin genelleme yeteneğini felaket düzeyinde azaltabilir ve tespit doğruluğunu önemli ölçüde düşürebilir.7 Bu nedenle, görüntü verisini tespit modeline beslemeden önce iyileştirmek, işlem hattının vazgeçilmez bir adımıdır.
1.2. Ön İşleme için Görüntü İyileştirme Tekniklerinin Eleştirel Bir Değerlendirmesi
Sualtı Görüntü İyileştirme (UIE) için geliştirilmiş çok sayıda teknik bulunmaktadır. Bu teknikler, basit ve hızlı geleneksel yöntemlerden, karmaşık ve hesaplama açısından yoğun derin öğrenme yaklaşımlarına kadar geniş bir yelpazeye yayılır. Projenin gömülü bir sistem üzerinde gerçek zamanlı çalışma gereksinimi, bu tekniklerin seçiminde hesaplama maliyetini birincil bir kısıt haline getirir.
Histogram Tabanlı Yöntemler: Bu kategorideki en temel yaklaşım Histogram Eşitleme'dir (HE). HE, bir görüntünün piksel yoğunluk dağılımını daha homojen hale getirerek genel kontrastı artırır. Ancak, gürültüyü de artırma eğilimindedir ve renk düzeltmesi yapmaz. Daha gelişmiş bir varyant olan Kontrast Sınırlı Adaptif Histogram Eşitleme (CLAHE), görüntüyü küçük bloklara ayırır ve her blok için yerel olarak histogram eşitleme uygular. Bu, yerel ayrıntıları daha iyi korur ve aşırı gürültü artışını sınırlar.8 CLAHE, hesaplama açısından oldukça verimlidir ve sualtı görüntülerinde kontrastı iyileştirmek için etkili bir temel çözüm sunar.
Fizik Tabanlı Modeller: Bu yaklaşımlar, sualtı görüntü oluşumunun fiziksel modelini tersine çevirmeyi amaçlar. Bu alandaki en bilinen örneklerden biri "Sea-Thru" algoritmasıdır.12 Sea-Thru, geri saçılım (backscatter) ve zayıflama katsayılarını tahmin etmek için genellikle bir derinlik haritasına (RGB-D görüntü) ihtiyaç duyar.12 Bu katsayılar tahmin edildikten sonra, suyun etkileri matematiksel olarak görüntüden "çıkarılır" ve sahnenin gerçek renkleri geri kazanılır. Fiziksel temellere dayandığı için görsel olarak çok etkileyici sonuçlar üretebilir. Ancak, derinlik bilgisi gerektirmesi, hesaplama açısından yoğun olması ve özellikle bulanık sularda zorlanması gibi dezavantajları vardır.13 Bu nedenle, tek bir RGB kamera kullanan gerçek zamanlı bir Raspberry Pi uygulaması için pratik bir çözüm değildir.
Derin Öğrenme Tabanlı İyileştirme (GAN'lar): Üretken Çekişmeli Ağlar (Generative Adversarial Networks - GANs), görüntü iyileştirme ve restorasyonunda son teknolojiyi temsil etmektedir. GAN tabanlı modeller, bozulmuş sualtı görüntülerini temiz ve gerçekçi görünümlü görüntülere dönüştürmeyi öğrenirler.16 Görsel kalite açısından en iyi sonuçları verseler de, eğitimleri ve çıkarım süreçleri son derece hesaplama yoğundur. Ayrıca, bazen gerçekçi olmayan dokular veya renkler gibi yapaylıklar (artifacts) üretebilirler. Bu yüksek işlem gücü gereksinimi, onları Raspberry Pi gibi kaynak kısıtlı bir platformda gerçek zamanlı ön işleme için uygunsuz kılar.
Bu analiz, projenin özel kısıtlamaları göz önüne alındığında, en görsel olarak etkileyici iyileştirme tekniklerinin (GAN'lar, Sea-Thru) genellikle en az uygun olanlar olduğu yönünde sezgisel olmayan bir sonuca yol açmaktadır. Gerçek zamanlı çıkarım için işlemci döngülerinin çoğunu tüketecek bu yöntemler, asıl nesne tespiti görevine çok az kaynak bırakacaktır. Bu nedenle, CLAHE gibi daha basit, hızlı ve "yeterince iyi" bir ön işleme yöntemi, bu özel uygulama için daha üstün bir seçimdir çünkü sistemi felç etmeden veya önemli bir alan kayması yaratmadan temel bir kontrast iyileştirmesi sağlar.
Tablo 1: Sualtı Görüntü İyileştirme Yöntemlerinin Karşılaştırmalı Analizi
Yöntem	Hesaplama Maliyeti	Renk Düzeltme Yeteneği	Kontrast İyileştirme Yeteneği	Yapaylık Riski	Gerçek Zamanlı RPi5 Dağıtımına Uygunluk
CLAHE	Düşük	Düşük	Yüksek	Düşük	Yüksek
Sea-Thru (Fizik Tabanlı)	Yüksek	Yüksek	Yüksek	Orta	Düşük
GAN Tabanlı	Çok Yüksek	Yüksek	Yüksek	Orta-Yüksek	Çok Düşük
1.3. İyileştirme-Tespit Sembiyozu: Performans Etkilerinin Analizi
Sualtı görüntülerinin ön işlenerek iyileştirilmesinin, nesne tespiti performansını her zaman artıracağı varsayımı yanıltıcı olabilir. Son araştırmalar, bu iki görev arasındaki ilişkinin daha karmaşık olduğunu göstermektedir. Görüntü iyileştirme ve nesne tespiti arasındaki entegrasyon için iki ana paradigma mevcuttur: ardışık (cascaded) çerçeve ve ortak öğrenme (joint-learning) çerçevesi.20 Ardışık yaklaşım, basit bir işlem hattıdır (İyileştir -> Tespit Et), ortak öğrenme ise her iki görevi aynı anda eğitir.
Yapılan çalışmalar, son teknoloji UIE modellerinin bir veri setine uygulanmasının, orijinal (iyileştirilmemiş) görüntüler üzerinde eğitilmiş bir nesne dedektörünün Ortalama Ortalama Kesinlik (mean Average Precision - mAP) değerini düşürebileceğini ortaya koymuştur.20 Bunun temel nedeni, dedektörün bozulmuş alandaki özellikleri tanımak üzere eğitilmiş olmasıdır. Çıkarım sırasında güçlü bir iyileştirme filtresi uygulamak, modele dağılım dışı (out-of-distribution) bir girdi sunar ve bu da performans düşüşüne yol açar.
Bu durum, hangi iyileştirme tekniğinin kullanılacağı kararının tek başına verilemeyeceğini, bunun yerine genel veri stratejisinin bir parçası olarak düşünülmesi gerektiğini göstermektedir. En sağlam yaklaşım, seçilen hafif iyileştirme tekniğini eğitim aşamasında bir veri artırma (data augmentation) yöntemi olarak ele almaktır. Eğitim veri seti, hem orijinal sualtı görüntülerinin hem de bu görüntülerin seçilen yöntemle (örneğin, CLAHE) işlenmiş versiyonlarının bir karışımını içermelidir. Bu strateji, modeli bu özel dönüşümlere karşı değişmez (invariant) ve farklı su kalitelerine karşı daha sağlam olacak şekilde eğitir. Görüntü düzeyinde yapılan analizler, iyileştirmenin özellikle zaten düşük kaliteli olan görüntülerde tespit performansını artırma potansiyeline sahip olduğunu göstermektedir.21 Bu nedenle, hedefli ve ölçülü bir iyileştirme stratejisi, körü körüne tüm verilere güçlü filtreler uygulamaktan daha etkilidir.
Bölüm 2: Modern Nesne Tespit Mimarilerinin Karşılaştırmalı Bir Analizi
Bu bölüm, projenin temelini oluşturan en iyi nesne tespit algoritmasını seçme görevine odaklanmaktadır. Analiz, sadece yüzeysel performans metriklerine değil, algoritmaların mimari farklılıklarına ve bu farklılıkların sualtı balık tespiti gibi özel bir alandaki zorluklar karşısındaki çıkarımlarına dayanacaktır.
2.1. Temel Paradigmalar: Tek Aşamalı ve İki Aşamalı Dedektörler
Modern nesne tespit algoritmaları, temel olarak iki ana paradigmada sınıflandırılabilir: iki aşamalı (two-stage) ve tek aşamalı (one-stage) dedektörler. Bu iki yaklaşım arasındaki temel fark, hız ve doğruluk arasındaki değiş tokuşta yatmaktadır.
İki Aşamalı Dedektörler (ör. Faster R-CNN): Bu mimariler, nesne tespitini iki ayrı adıma böler. İlk aşamada, bir Bölge Öneri Ağı (Region Proposal Network - RPN), görüntüde nesne içerebilecek potansiyel alanları ("ilgi bölgeleri" - regions of interest) belirler. İkinci aşamada ise, bu önerilen her bir bölge için bir sınıflandırma yapılır ve sınırlayıcı kutunun (bounding box) konumu hassas bir şekilde ayarlanır.4 Bu ayrık süreç, özellikle küçük veya birbiriyle örtüşen nesnelerin tespitinde genellikle daha yüksek doğruluk sağlar. Ancak, bu iki aşamalı yapı, önemli bir hesaplama maliyeti getirir ve bu da onları gerçek zamanlı uygulamalar için daha az uygun hale getirir.3
Tek Aşamalı Dedektörler (ör. SSD, YOLO): Bu modeller, nesne tespitini tek bir regresyon problemi olarak ele alır. Görüntüyü ağdan tek bir geçişte işleyerek, sınıf olasılıklarını ve sınırlayıcı kutu koordinatlarını doğrudan tahmin ederler.4 Bu birleşik tasarım, doğası gereği çok daha hızlı ve hesaplama açısından verimlidir. Bu özellikleri, onları gerçek zamanlı çıkarım gerektiren mobil ve gömülü sistem uygulamaları için ideal kılar.4
2.2. Mimari Derin Dalış: YOLO, SSD ve Faster R-CNN
Bu üç model ailesi, nesne tespiti alanındaki farklı yaklaşımları temsil eder ve her birinin kendine özgü mimari özellikleri, güçlü ve zayıf yönleri vardır.
Faster R-CNN: Bu modelin mimarisi üç ana bileşenden oluşur: özellik haritalarını çıkaran bir omurga ağı (Backbone, genellikle ResNet50 gibi), nesne adaylarını bulan RPN ve bu adayları sınıflandırıp kutularını hassaslaştıran bir dedektör başlığı (Detector Head). İki aşamalı yapısı sayesinde, özellikle nesnelerin yerini belirlemede (localization) yüksek bir hassasiyete sahiptir. Bu, balık sürülerindeki gibi birbirine yakın veya kısmen örtüşen balıkların tespitinde bir avantaj olabilir.
SSD (Single Shot MultiBox Detector): SSD'nin temel yeniliği, nesneleri farklı ölçeklerde tespit etmek için ağın farklı derinliklerindeki evrişimli katmanlardan gelen özellik haritalarını kullanmasıdır. Bu çok ölçekli özellik haritası yaklaşımı, özellikle küçük nesnelerin tespitinde erken YOLO versiyonlarına göre daha iyi performans göstermesine yardımcı olur.4 SSD'nin MobileNet gibi hafif bir omurga ağı ile birleştirilmesi (SSD-MobileNet), onu son derece hızlı bir model haline getirir ve kaynak kısıtlı cihazlar için cazip bir seçenek yapar, ancak genellikle doğruluktan ödün verir.3
YOLO (You Only Look Once): YOLO, görüntüyü bir ızgaraya (grid) bölme ve her bir ızgara hücresinin sınırlayıcı kutuları ve bu kutular için sınıf olasılıklarını tahmin etmesi temel konsepti üzerine kuruludur. YOLOv3'ten YOLOv5 ve YOLOv8'e kadar olan evrim sürecinde, mimari sürekli olarak iyileştirilmiştir. Daha verimli omurga ağları (ör. CSPNet), özellik birleştirme katmanları (ör. PANet) ve çapa kutusu içermeyen (anchor-free) mekanizmalar gibi yenilikler, YOLO'nun hızını korurken veya artırırken, iki aşamalı dedektörlerle olan doğruluk farkını giderek kapatmasını sağlamıştır.3
2.3. Akuatik Ortamlarda Performans Değiş Tokuşları: Hız, Doğruluk ve Sağlamlık
Sualtı balık tespiti üzerine yapılan karşılaştırmalı çalışmalar, bu modeller arasındaki genel performans dengesini doğrulamaktadır. Genel eğilim şöyledir: Faster R-CNN genellikle en doğru ama en yavaş olanıdır; SSD-MobileNet en hızlısı ama genellikle en az doğru olanıdır; YOLO'nun modern versiyonları (v5, v8) ise tipik olarak hız ve yüksek doğruluk arasında en iyi dengeyi sunar.3
Mercan balıklarının tespiti üzerine yapılan bir çalışma, YOLOv5'in en yüksek mAP değerine (%99.1) ulaştığını, onu Faster R-CNN'in (%97.7) ve SSD-MobileNet'in (%87.2) takip ettiğini bulmuştur. Ancak, hız açısından SSD-MobileNet, test donanımında yaklaşık 1.24 FPS ile YOLOv5'in 0.65 FPS'sinden ve Faster R-CNN'in 0.10 FPS'sinden çok daha üstündü.3 Bu, projenin gereksinimlerine bağlı olarak yapılması gereken kritik hız-doğruluk seçimini açıkça göstermektedir. Orfoz ve çıpura tespiti üzerine yapılan başka bir karşılaştırmada ise YOLOv8, hem tespit doğruluğu (%96'ya karşı %95) hem de ilgili bir ağırlık tahmin görevinde Faster R-CNN'den daha iyi performans göstermiştir.5
Bu bulgular, projenin hem gerçek zamanlı performans hem de yüksek doğruluk gereksinimleri göz önüne alındığında, YOLO mimarisinin en mantıklı başlangıç noktası olduğunu göstermektedir. Proje, bir balığın sadece varlığını değil, aynı zamanda türünü (özellikle balon balığı) güvenilir bir şekilde ayırt etmeyi hedeflediğinden, SSD-MobileNet gibi daha az hassas modeller yetersiz kalabilir. Faster R-CNN'in yavaşlığı ise gerçek zamanlı hedefiyle çelişmektedir. YOLO ailesi, bu iki zıt gereksinimi dengelemek üzere tasarlanmıştır.
Ayrıca, YOLO ekosisteminin (özellikle Ultralytics'in YOLOv5/v8'i) sunduğu model ölçeklenebilirliği (örneğin, n, s, m, l, x versiyonları) önemli bir pratik avantajdır. Geliştirme süreci, eğitim ve doğrulama için güçlü bir masaüstü bilgisayarda daha büyük ve doğru bir modelle (ör. YOLOv8m) başlayabilir. Ardından, Raspberry Pi 5'e dağıtım için, hedef donanımda hız ve doğruluk arasında en uygun dengeyi bulmak amacıyla kolayca daha küçük ve hızlı bir versiyona (ör. YOLOv8s veya YOLOv8n) geçilebilir. Bu yinelemeli ayarlama yeteneği, çerçevenin içine yerleştirilmiştir ve geliştirme sürecini büyük ölçüde esnekleştirir.
Tablo 2: Lider Nesne Tespit Modellerinin Mimari ve Performans Karşılaştırması
Model	Mimari Türü	Göreceli Hız	Göreceli Doğruluk	Temel Güçlü Yönleri	Temel Zayıf Yönleri	RPi5 Balık Tespitine Uygunluk
Faster R-CNN (ResNet50)	İki Aşamalı	Yavaş	Yüksek	Küçük nesneler için en iyi yerelleştirme	Yüksek hesaplama maliyeti, yavaş çıkarım	Düşük
SSD (MobileNet)	Tek Aşamalı	Çok Hızlı	Orta	Gömülü sistemler için son derece hızlı	Daha düşük doğruluk, karmaşık sahnelerde zorlanır	Orta
YOLOv8s	Tek Aşamalı	Hızlı	Yüksek	Hız ve doğruluk arasında mükemmel denge	İki aşamalı modellere göre yerelleştirme hassasiyeti biraz daha düşük olabilir	Yüksek
Bölüm 3: Genel ve Özel Hedef Tespiti için Veri Stratejisi
En sofistike derin öğrenme modeli bile, iyi seçilmiş ve ilgili bir veri seti olmadan işe yaramaz. Veri, modelin yakıtıdır. Bu bölüm, hem genel balık tespiti hem de özel olarak balon balığı tespiti görevi için veri toplama, hazırlama ve zenginleştirme stratejisini ana hatlarıyla belirleyecektir.
3.1. Halka Açık Sualtı Veri Setlerinin İncelenmesi
Projenin başlangıç noktası olarak veya ön eğitim için kullanılabilecek mevcut veri setlerini değerlendirmek önemlidir.
Fish4Knowledge (F4K): Mercan resiflerindeki balıkları içeren, bu alanda sıkça atıf yapılan bir veri setidir. Ancak, ciddi bir sınıf dengesizliğine sahiptir ve çok özel bir ekosisteme odaklanmıştır.6 Toplamda 23 farklı balık türü içerir.23
Brackish Veri Seti: Kuzey Danimarka'dan toplanmış 14,000'den fazla görüntü içeren büyük bir veri setidir.26 Tropik resiflerden farklı bir ortam sunması açısından değerlidir. Daha da önemlisi, görüntüler sabit bir sualtı kamerasından elde edilmiştir, bu da projenin hedeflenen dağıtım senaryosuna benzerlik gösterebilir.
Diğer Veri Setleri: Akvaryum Veri Seti (daha kontrollü ortam) 27, COU (Common Objects Underwater - balık dışı nesneler için) 10 ve UOT32 (takip için) 28 gibi daha küçük veya özel amaçlı veri setleri de mevcuttur.
Bu veri setlerinin ortak ve en önemli sınırlılığı, karasal veri setlerine kıyasla sualtı ortamları için büyük, çeşitli ve iyi etiketlenmiş veri setlerinin azlığıdır.7 Bu durum, "alan kayması" (domain shift) olarak bilinen ciddi bir soruna yol açar. Örneğin, F4K veri setindeki mercan resifi balıkları üzerinde eğitilmiş bir model, Akdeniz'deki balık türlerini tespit etmede büyük olasılıkla başarısız olacaktır.6 Bu nedenle, mevcut veri setleri bir temel sağlasa da, yüksek performans için projeye özgü bir veri setinin oluşturulması kaçınılmazdır.
3.2. Lagocephalus sceleratus (Balon Balığı) Özel Tespiti
Projenin özel hedefi olan balon balığı, sıradan bir balık değildir. Lagocephalus sceleratus, Süveyş Kanalı aracılığıyla Kızıldeniz'den gelerek Akdeniz'i hızla kolonize etmiş, oldukça zehirli ve istilacı bir türdür ("Lessepsian göçmen").31 Yerel balıkçılık ve insan sağlığı üzerinde ciddi olumsuz etkileri bulunmaktadır.32
Bu türe yönelik özel tespit çalışmaları mevcuttur. Bir akademik çalışma, Lagocephalus sceleratus'u tanımlamak için YOLO kullandığını açıkça belirtmiş, bu da projenin hedeflerinin fizibilitesini doğrulamıştır.35 Daha da ilginç bir çalışma, FishIR adı verilen bir derin yüz tanıma (deep face recognition) çerçevesi kullanarak bireysel balon balıklarını benzersiz sırt derisi desenlerinden tanımayı başarmıştır.36 Bireysel tanıma bu projenin kapsamı dışında olsa da, bu çalışma derin öğrenmenin balon balıklarının ince tanecikli özelliklerini yakalayabildiğini kanıtlamakta ve bu türe ait değerli, etiketlenmiş bir veri seti sunmaktadır. Genel olarak istilacı türlerin tespiti için bilgisayarlı görü kullanımı da literatürde yer alan bir konudur.37
3.3. Özel Veri Seti Oluşturma ve Artırma Çerçevesi
Halka açık veri setlerinin sınırlılıkları göz önüne alındığında, özellikle hedeflenen tür ve coğrafi konum için yüksek performans elde etmek amacıyla özel bir veri seti oluşturmak esastır. Bu süreç, dikkatli bir planlama gerektirir.
Veri Toplama: En etkili strateji, eğitim verilerinin çıkarım donanımıyla olabildiğince eşleşmesini sağlamaktır. Bu nedenle, hedef ortamdan Raspberry Pi 5 ve Kamera Modülü 3 kullanılarak video görüntüleri toplanması şiddetle tavsiye edilir.
Etiketleme (Annotation): Toplanan videolardan çıkarılan kareler üzerinde, LabelImg gibi araçlar kullanılarak hassas sınırlayıcı kutu etiketlemesi yapılmalıdır.40 Sınıflar başlangıçta balon_baligi ve genel bir balik sınıfı olarak belirlenebilir.
Veri Artırma (Data Augmentation): Bu adım, özellikle veri azlığı sorununu aşmak için kritik öneme sahiptir. Döndürme, çevirme, ölçekleme gibi standart artırma tekniklerinin ötesinde 29, alana özgü artırma yöntemleri uygulanmalıdır. Bu, Bölüm 1'de ana hatları çizilen zorluklara karşı modeli daha sağlam hale getirmek için farklı seviyelerde bulanıklık, renk sapması ve aydınlatma varyasyonlarını simüle etmeyi içerir.
Bu veri stratejisinin temelinde iki önemli ilke yatmaktadır. Birincisi, bir transfer öğrenme stratejisinin pazarlık konusu olmamasıdır. Sualtı veri setlerinin azlığı nedeniyle, bir modeli sıfırdan eğitmek pratik değildir ve muhtemelen düşük performansla sonuçlanacaktır. En uygun strateji, COCO gibi büyük bir karasal veri setinde önceden eğitilmiş bir YOLOv8 modeliyle başlamaktır. Bu, modele genel görsel özellikleri (kenarlar, dokular, şekiller) öğrenmiş güçlü bir özellik çıkarıcı sağlar. Ardından, bu model, en iyi halka açık sualtı verileri (örneğin, Brackish) ve özel olarak toplanan verilerden oluşan birleşik bir veri seti üzerinde ince ayarlanır (fine-tuning). Bu, genelleştirilmiş özellikleri özel sualtı alanına ve hedef balık türlerine uyarlar.
İkincisi, balon balığının hem bir hedef hem de bir "zor negatif" (hard negative) olmasıdır. Modelin balon balığını tespit etmede mükemmel olması için çok sayıda pozitif örneğe ihtiyacı vardır. Ancak, yanlış pozitiflerden kaçınmak için, modeli balon balığını görsel olarak benzer diğer yerli Akdeniz balıklarından ayırt etmede de mükemmel olması gerekir. Bu nedenle, özel veri seti kürasyonu bu durumu göz önünde bulundurmalıdır. Sadece balon balığı videoları toplamak yeterli değildir; veri toplama süreci, onunla karıştırılabilecek diğer balık türlerini aktif olarak aramalı ve etiketlemelidir. Bu "zor negatifler", ayırt edici ve güvenilir bir sınıflandırıcı eğitmek için pozitif örnekler kadar önemlidir.
Bölüm 4: Uç Cihazlar için Optimizasyon: Raspberry Pi 5 Platformunda Dağıtım
Bu bölüm, teorik model seçimi ve veri stratejisini fiziksel donanıma bağlar. Raspberry Pi 5'in yeteneklerini, 16GB RAM'in kritik rolünü ve mümkün olan en iyi performansı elde etmek için gereken yazılım çerçevelerini analiz edecektir.
4.1. Donanım Profili ve 16GB RAM'in Stratejik Avantajı
Raspberry Pi 5 CPU: Raspberry Pi 5, dört çekirdekli Arm Cortex-A76 mimarisine dayanan Broadcom BCM2712 işlemciye sahiptir. Önceki nesillere göre önemli ölçüde daha güçlü olmasına rağmen, bu işlemci özel bir yapay zeka hızlandırıcısı değildir. Bu nedenle, model çıkarımı CPU'ya bağlı olacaktır.
16GB RAM Avantajı: Projenin donanım seçimindeki bu kilit unsur, genellikle yanlış anlaşılan avantajlar sunar. 16GB RAM, doğrudan daha yüksek FPS anlamına gelmez. Çıkarım hızı (FPS), öncelikli olarak CPU'nun hesaplama kapasitesi tarafından belirlenir. RAM'in rolü depolamadır ve bu büyük bellek kapasitesi, projeye doğrudan hız artışından daha değerli olan esneklik ve sağlamlık kazandırır:
•	Daha Büyük Modeller: Düşük RAM'li cihazlarda belleğe sığmayacak veya sistemi kararsız hale getirecek olan YOLOv8m veya hatta YOLOv8l gibi daha büyük, daha karmaşık ve dolayısıyla daha doğru nesne tespit modellerinin yüklenmesine ve çalıştırılmasına olanak tanır.
•	Daha Büyük Parti Boyutları (Batch Sizes): Çıkarım sırasında (video karelerini toplu olarak işlerken) daha büyük partiler bellekte tutulabilir. Bu, teorik olarak verimi artırabilir, ancak CPU'ya bağlı sistemlerde bu fayda genellikle işlemci darboğazı tarafından sınırlanır.41
•	Karmaşık İşlem Hatları: Çerçeve yakalama, ön işleme/iyileştirme, model çıkarımı ve son işleme/takip gibi çok aşamalı bir işlem hattının bellek tükenmesi endişesi olmadan eş zamanlı olarak çalıştırılması için yeterli bellek payı sağlar.
•	Diğer Hizmetleri Çalıştırma: Cihazın, temel tespit yazılımını çalıştırırken aynı zamanda sonuçları yayınlayan bir web sunucusu veya veri kaydı gibi diğer görevleri, bellek takası (swapping) nedeniyle performans düşüşü yaşamadan yönetmesine olanak tanır.
Özetle, 16GB RAM, projenin riskini azaltan stratejik bir varlıktır. Geliştiriciye, doğruluk tavanını bulmak için geliştirme sırasında daha büyük modellerle deneme yapma ve ardından FPS hedefini karşılayan daha küçük bir modele ölçeklendirme özgürlüğü verir.
4.2. Çıkarım Çalışma Zamanlarının Analizi: TensorFlow Lite ve ONNX Runtime
Eğitilmiş bir modelin hedef donanımda verimli bir şekilde çalıştırılması, çıkarım çalışma zamanı (inference runtime) adı verilen optimize edilmiş bir yazılım kütüphanesi aracılığıyla gerçekleştirilir. Bu proje için iki ana aday öne çıkmaktadır.
TensorFlow Lite (TFLite): TensorFlow modellerini mobil ve gömülü cihazlarda dağıtmak için resmi çerçevedir. Model dönüştürme ve nicemleme için araçlar sunar. Raspberry Pi 4 üzerinde MobileNetV1 ile yapılan testlerde 10-20 FPS arasında performans elde edildiği rapor edilmiştir.42 Ancak, en son donanım ve işletim sistemi kombinasyonları (Raspberry Pi 5 ve Bookworm OS gibi) için belgeler ve destek bazen geriden gelebilir, bu da bağımlılık sorunlarına yol açabilir.43
ONNX Runtime: Microsoft tarafından geliştirilen, açık kaynaklı ve platformlar arası bir çıkarım motorudur. En büyük avantajı birlikte çalışabilirliğidir; PyTorch veya TensorFlow gibi herhangi bir çerçeveden gelen modeller ONNX formatına dönüştürülebilir ve ONNX Runtime'ın desteklendiği her yerde çalıştırılabilir. Genellikle yerel çerçevelere kıyasla daha üstün bir "kutudan çıktığı gibi" performans sunan, yüksek düzeyde optimize edilmiş bir kütüphanedir.45 Uç cihaz dağıtımları için sağlam ve esnek bir seçimdir.
4.3. Model Optimizasyonunun Zorunluluğu: Nicemleme ve Verim Ayarlaması
Gömülü bir CPU üzerinde kabul edilebilir bir performans elde etmek için model optimizasyonu kaçınılmazdır.
Model Nicemlemesi (Quantization): Bu süreç, modelin ağırlıklarını 32-bit kayan nokta (FP32) formatından 8-bit tam sayı (INT8) formatına dönüştürmeyi içerir. Bu işlem, model boyutunu yaklaşık 4 kat azaltır ve optimize edilmiş INT8 talimatlarına sahip CPU'larda, doğrulukta minimum bir kayıpla çıkarım hızını önemli ölçüde artırabilir. Bu, gömülü dağıtım için standart ve temel bir adımdır.
Raspberry Pi 5 Üzerindeki Performans Kıyaslamaları:
•	YOLOv8n modelinin sadece CPU kullanılarak elde edilen performansı yaklaşık 9 FPS olarak rapor edilmiştir.47 Bu, projenin temel performans beklentisini belirleyen kritik bir gerçek dünya verisidir.
•	Bir Hailo-8 AI hızlandırıcısı ile performansın fırladığı görülmüştür. YOLOv8s, parti boyutuna bağlı olarak 80-120 FPS'ye ulaşabilmektedir.41 Proje bir hızlandırıcı belirtmese de, bu rakamlar neyin mümkün olduğunun tavanını gösterir ve sadece CPU'ya dayalı bir yaklaşımın sınırlamalarını vurgular.
•	Parti boyutunun performans üzerinde doğrusal olmayan bir etkisi vardır. Raspberry Pi 5 ve Hailo kombinasyonunda, performans 8'lik bir parti boyutunda zirve yapmıştır; bu durumun muhtemelen PCIe bant genişliği darboğazından kaynaklandığı düşünülmektedir.41
Bu veriler ve optimizasyon ilkeleri ışığında, yazılım yığınının donanım kadar önemli olduğu açıktır. Çıkarım çalışma zamanı (ONNX) ve optimizasyon tekniği (nicemleme) seçimi, sadece biraz daha küçük bir model seçmekten daha büyük bir performans artışı sağlayabilir. FP32 ve INT8 çıkarımı arasındaki fark tek başına 2 kat hızlanma sağlayabilir. Bu adımları atlamak, önemli bir performansı masada bırakmak anlamına gelir ve sistemin gerçek zamanlı olup olmaması arasındaki farkı yaratabilir.
Tablo 3: Aday Modellerin Raspberry Pi 5 (Sadece CPU) Üzerindeki Tahmini Performansı
Model	Format	Tahmini Model Boyutu (MB)	Tahmini RAM Kullanımı (MB)	Tahmini Sadece CPU FPS (Kare/Saniye)
SSD-MobileNet	INT8	~5-7	~50-100	12 - 18
YOLOv8n	FP32	~12	~200-300	~9 47
YOLOv8n	INT8	~3	~100-150	15 - 20
YOLOv8s	FP32	~22	~400-500	~5 - 7
YOLOv8s	INT8	~6	~200-300	10 - 15
Not: Tahmini FPS değerleri, YOLOv8n için rapor edilen 9 FPS temel alınarak ve INT8 nicemlemesinin getireceği tipik 1.5-2 kat hızlanma varsayılarak hesaplanmıştır. Gerçek performans, girdi çözünürlüğüne ve ön/son işleme adımlarının karmaşıklığına bağlı olarak değişebilir.
Bölüm 5: Sentezlenmiş Bir Geliştirme Yol Haritası
Bu son bölüm, önceki bölümlerdeki tüm analizleri sentezleyerek proje için somut, adım adım bir eylem planı sunmaktadır. Her bir seçim için net gerekçelerle birlikte, tüm yazılım işlem hattı için kesin bir öneri sağlayacaktır.
5.1. Önerilen Uçtan Uca İşlem Hattı: Görüntü Yakalamadan Çıkarıma
Önerilen sistemin iş akışı aşağıdaki adımları içerecektir:
1.	Görüntü Edinimi: Raspberry Pi Kamera Modülü 3'ten, libcamera veya OpenCV gibi bir kütüphane kullanılarak video akışı yakalanır.
2.	Ön İşleme: Yakalanan her bir kareye, gerçek zamanlı kontrast iyileştirmesi için hafif ve verimli olan CLAHE algoritması uygulanır.
3.	Çıkarım (Inference): İşlenmiş kare, ONNX Runtime aracılığıyla nicemlenmiş nesne tespit modeline beslenir. Model, görüntüdeki nesneler için sınırlayıcı kutu koordinatlarını ve sınıf olasılıklarını çıkarır.
4.	Son İşleme (Post-processing): Modelin ham çıktıları üzerinde, örtüşen ve gereksiz kutuları filtrelemek için Maksimum Olmayan Bastırma (Non-Max Suppression - NMS) algoritması uygulanır.
5.	Çıktı: Sonuçta elde edilen filtrelenmiş sınırlayıcı kutular, orijinal video karesi üzerine çizilir. Tespit edilen nesnelerin (örneğin, "balon_baligi") sayısı ve konumları gibi olaylar kaydedilir ve işlenmiş video akışı kullanıcıya gösterilir.
5.2. Nihai Algoritma ve Kütüphane Seçimi ile Derinlemesine Gerekçelendirme
Önceki bölümlerde yapılan kapsamlı analizlere dayanarak, projenin hedeflerine ulaşması için önerilen teknoloji yığını aşağıda ayrıntılı olarak gerekçelendirilmiştir.
•	Önerilen Model: INT8 formatında nicemlenmiş YOLOv8s.
o	Gerekçe: Bu model, bu tür problemler için hız ve doğruluk arasında kanıtlanmış en iyi dengeyi sunmaktadır (Bölüm 2). 's' (small) varyantı, 'm' veya 'l' versiyonlarından daha yönetilebilir bir hesaplama yükü sunarken yüksek doğruluk sağladığı için Raspberry Pi 5 CPU'su için iyi bir başlangıç noktasıdır. Daha yüksek FPS'nin kritik olduğu durumlarda, bir miktar doğruluktan ödün vererek 'n' (nano) versiyonu da bir alternatif olarak düşünülebilir (Bölüm 4, Tablo 3).
•	Önerilen Eğitim Stratejisi: Transfer Öğrenme.
o	Gerekçe: Resmi COCO ön eğitimli YOLOv8s modeli ile başlanmalıdır. Bu model, Brackish veri seti 26 ve Akdeniz balıklarına, özellikle de Lagocephalus sceleratus'a odaklanan özel olarak toplanmış ve etiketlenmiş bir veri setinden oluşan kompozit bir veri seti üzerinde ince ayarlanmalıdır. Bu yaklaşım, veri azlığı sorununu aşar ve modelin hedef alana yüksek performansla uyum sağlamasını sağlar (Bölüm 3).
•	Önerilen Ön İşleme: CLAHE (Kontrast Sınırlı Adaptif Histogram Eşitleme).
o	Gerekçe: CLAHE, hesaplama açısından hafiftir ve sualtı görüntülerindeki temel sorunlardan biri olan yerel kontrastı iyileştirmede etkilidir. Daha karmaşık yöntemlerin getireceği işlem yükü veya potansiyel yapaylıklar olmadan temel bir iyileştirme sağlar (Bölüm 1).
•	Önerilen Çıkarım Çerçevesi: ONNX Runtime.
o	Gerekçe: Mükemmel performans, platformlar arası uyumluluk ve YOLOv8'in yerel çerçevesi olan PyTorch'tan Raspberry Pi'ye model dağıtımı için kararlı, iyi desteklenen bir yol sunar. Optimize edilmiş yapısı, CPU üzerinde mümkün olan en yüksek performansı elde etmek için kritik öneme sahiptir (Bölüm 4).
5.3. Gelecek Çalışmalar ve Donanım Hızlandırma Potansiyeli
Bu yol haritası, projenin başarılı bir şekilde hayata geçirilmesi için sağlam bir temel oluşturmaktadır. Bununla birlikte, sistemin yeteneklerini daha da ileriye taşımak için çeşitli yollar mevcuttur.
•	Takip (Tracking): Sistem, basit tespitten nesne takibine genişletilebilir. DeepSORT veya BoT-SORT gibi algoritmalar kullanılarak, tespit edilen her bir balığa benzersiz bir kimlik atanabilir. Bu, benzersiz balıkları saymayı, belirli bir alandaki popülasyon yoğunluğunu tahmin etmeyi ve zaman içindeki davranışlarını analiz etmeyi mümkün kılar.
•	Donanım Hızlandırma: YOLOv8s için hedeflenen yaklaşık 10-15 FPS'lik sadece CPU performansı yetersiz kalırsa, atılacak en mantıklı adım, Raspberry Pi 5'in M.2 veya PCIe arayüzü üzerinden özel bir yapay zeka hızlandırıcısı entegre etmektir. Kıyaslamalarda incelenen bir Hailo-8L AI Kiti gibi bir donanım, performansta 10 kattan fazla bir artış sağlayarak yüksek kare hızlı, gerçek zamanlı tespiti kolayca mümkün kılacaktır.41 Daha yüksek performans için en doğrudan yol budur.
•	Model Budama ve Damıtma (Pruning & Distillation): İleri düzey optimizasyon için, model budama (gereksiz ağırlıkları kaldırma) ve bilgi damıtma (daha büyük bir modelin bilgisini taklit etmesi için küçük bir model eğitme) gibi teknikler, CPU'dan daha fazla performans elde etmek için potansiyel araştırma yolları olarak düşünülebilir. Bu yöntemler, modelin boyutunu ve hesaplama gereksinimlerini daha da azaltabilir.
